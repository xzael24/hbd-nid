<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selamat Ulang Tahun!</title>
    <!-- Importing Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #ffd700; /* Gold */
            --text-color: #e0e0e0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Montserrat', sans-serif;
            background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            color: var(--text-color);
            position: relative;
        }

        /* Astronomy Background Elements */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle var(--duration, 2s) infinite ease-in-out;
            opacity: 0.8;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .meteor {
            position: absolute;
            top: -100px;
            width: 300px;
            height: 1px;
            background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.8) 50%, rgba(255,255,255,0) 100%);
            transform: rotate(-45deg);
            animation: shoooting-star 5s linear infinite;
            opacity: 0;
        }
        
        @keyframes shoooting-star {
            0% { transform: translateX(0) translateY(0) rotate(-45deg); opacity: 1; }
            20% { opacity: 0; }
            100% { transform: translateX(-100vw) translateY(100vh) rotate(-45deg); opacity: 0; }
        }

        /* Content Container */
        .content-container { 
            position: relative;
            z-index: 10;
            padding: 2rem;
            text-align: center;
            max-width: 800px;
            width: 100%;
        }

        h1 {
            font-family: 'Cinzel', serif;
            font-size: 4rem;
            background: linear-gradient(45deg, #ffd700, #ffecb3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 2rem;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
            opacity: 0;
            animation: fadeTitle 2s ease-out forwards;
        }

        @keyframes fadeTitle {
            from { opacity: 0; transform: translateY(-20px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .message {
            font-size: 1.3rem;
            line-height: 2;
            margin-bottom: 3rem;
            color: #fff;
            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
            font-weight: 400;
        }

        /* Word Animation Class */
        .word {
            display: inline-block;
            opacity: 0;
            margin-right: 5px; /* Spacing between words */
            filter: blur(4px);
            animation: revealWord 1s forwards ease-out;
            transform: translateY(10px);
        }

        @keyframes revealWord {
            to { 
                opacity: 1; 
                filter: blur(0); 
                transform: translateY(0);
            }
        }

        .btn {
            padding: 15px 50px;
            background: transparent;
            color: #ffd700;
            border: 2px solid #ffd700;
            border-radius: 50px;
            font-family: 'Cinzel', serif;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.1);
            text-transform: uppercase;
            letter-spacing: 3px;
            opacity: 0; /* Hidden initially */
        }

        .btn:hover {
            transform: scale(1.1);
            background: rgba(255, 215, 0, 0.1);
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.4);
            text-shadow: 0 0 10px #ffd700;
        }

        /* Fireworks Canvas */
        #fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 5;
            pointer-events: none;
        }

        /* Welcome Overlay */
        #welcome-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0,0,0,0.7); /* Slightly darken bg */
            backdrop-filter: blur(5px);
        }

        #welcome-overlay .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            padding: 3rem;
            border-radius: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            max-width: 500px;
            width: 90%;
        }

        #welcome-overlay h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            animation: none; /* No fade animation for this title */
            opacity: 1;
        }

        #welcome-overlay p {
            margin-bottom: 2rem;
            font-size: 1.1rem;
            color: #ddd;
        }

        .song-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 2rem;
            text-align: left;
        }

        .song-option {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            border: 1px solid transparent;
        }

        .song-option:hover {
            background: rgba(255,255,255,0.1);
            border-color: #ffd700;
        }

        .song-option input {
            margin-right: 15px;
            accent-color: #ffd700;
            transform: scale(1.2);
        }

        .song-label {
            font-size: 1rem;
            color: #fff;
        }

        .btn-start {
            padding: 12px 40px;
            background: #ffd700;
            color: #1b2735;
            border: none;
            border-radius: 50px;
            font-family: 'Cinzel', serif;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .btn-start:hover {
            transform: scale(1.05);
            background: #ffecb3;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem; /* Smaller title on mobile */
                margin-bottom: 1.5rem;
            }

            .message {
                font-size: 1rem; /* Readable text size */
                line-height: 1.6;
                margin-bottom: 2rem;
            }

            .content-container {
                padding: 1.5rem;
            }

            .btn {
                padding: 12px 30px;
                font-size: 1rem;
            }

            #welcome-overlay .card {
                padding: 2rem;
                width: 85%;
            }

            #welcome-overlay h1 {
                font-size: 1.8rem;
            }

            .song-label {
                font-size: 0.9rem;
            }
        }

        /* Landscape Mode Fix */
        @media (max-height: 500px) and (orientation: landscape) {
            .content-container {
                transform: scale(0.8); /* Scale down content to fit */
                padding: 1rem;
            }
            
            h1 { margin-bottom: 0.5rem; }
            .message { margin-bottom: 1rem; }
        }
    </style>
</head>
<body>

    <!-- Audio Element (Empty initially) -->
    <audio id="bg-music" loop></audio>

    <!-- Star Background (Always visible) -->
    <div class="stars" id="stars-container"></div>
    <canvas id="fireworks-canvas"></canvas>

    <!-- 1. Music Selection Overlay -->
    <div id="welcome-overlay">
        <div class="card">
            <h1>Welcome, Nida</h1>
            <p>Seblum masuk, pilih lagu untuk nemenin km baca ini ya:</p>
            
            <div class="song-options">
                <label class="song-option">
                    <input type="radio" name="song" value="rayuan" checked>
                    <span class="song-label">Rayuan Perempuan Gila - Nadin Amizah</span>
                </label>
                <label class="song-option">
                    <input type="radio" name="song" value="beranjak">
                    <span class="song-label">Beranjak Dewasa - Nadin Amizah</span>
                </label>
                <label class="song-option">
                    <input type="radio" name="song" value="jamrud">
                    <span class="song-label">Selamat Ulang Tahun - Jamrud</span>
                </label>
            </div>

            <button class="btn-start" onclick="enterSite()">Buka Ucapan âœ¨</button>
        </div>
    </div>

    <!-- 2. Main Content (Hidden initially) -->
    <div class="content-container" id="main-content" style="display: none; opacity: 0;">
        <h1>Happy Birthday</h1>
        <div class="message" id="birthday-message">
            Happy 19th birthday yaa.<br><br>
            Gila sih, kadang ak mikirâ€¦ km udah ngelewatin banyak hal yang nggak semua orang seumuran km kuat jalaninnya. Pasti banyak momen capek, bingung, ngerasa sendirian, tapi entah gimana km tetep jalan terus, kerenn km kk nid, ur little family must be proud of u.<br><br>
            Pokonya semoga di umur 19 ini km lebih sering nemuin hal hal kecil yang bikin km ngerasa tenang, lebih percaya sama diri km sendiri, dan pelan pelan jg sadar kalau semua perjuangan km sejauh ini nggak sia sia yh kk nid. Apa pun yang lagi km hadapin sekarang, ak harap km tau kalau km pantes dapet hal-hal baik.<br><br>
            Happy birthday yaa Nida Reyhanaâœ¨âœ¨
        </div>
        <button class="btn" onclick="startCelebration()">Nyalain kembang api disini nid ðŸŽ†</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/fireworks-js@2.10.0/dist/index.umd.js"></script>
    
    <script>
        // Song Database
        // GANTI URL DI BAWAH INI DENGAN LINK MP3 YANG VALID ATAU FILE LOKAL
        const songs = {
    'rayuan': 'rayuan_perempuan_gila.mp3',
    'beranjak': 'beranjak_dewasa.mp3',
    'jamrud': 'selamat_ulang_tahun.mp3'
};

        // 1. Enter Site Logic
        function enterSite() {
            const selectedValue = document.querySelector('input[name="song"]:checked').value;
            const audio = document.getElementById('bg-music');
            
            // Set source and play
            // Note: If archive.org links fail (CORS/Hotlink protection), user must use local files
            audio.src = songs[selectedValue];
            
            audio.play().catch(e => {
                console.log("Audio play failed (browser policy?):", e);
                alert("Klik OK untuk memutar musik manuai jika tidak bunyi otomatis.");
                audio.play();
            });

            // Hide Overlay
            const overlay = document.getElementById('welcome-overlay');
            overlay.style.transition = 'opacity 1s ease';
            overlay.style.opacity = '0';
            setTimeout(() => {
                overlay.style.display = 'none';
                startExperience(); // Start text animation
            }, 1000);
        }

        // 2. Text Animation Logic (Wrapped in function)
        function startExperience() {
            const content = document.getElementById('main-content');
            content.style.display = 'block';
            // Trigger reflow
            content.offsetHeight; 
            content.style.transition = 'opacity 2s ease';
            content.style.opacity = '1';

            const msgElement = document.getElementById('birthday-message');
            const btnElement = document.querySelector('.btn');
            
            // Function to split text and wrap in spans
            function splitText(el) {
                const nodes = Array.from(el.childNodes);
                el.innerHTML = ''; 
                
                let delayCounter = 0.7; 
                
                nodes.forEach(node => {
                    if (node.nodeType === 3) { // Text Node
                        const words = node.textContent.trim().split(/\s+/);
                        words.forEach(word => {
                            if (word.length > 0) {
                                const span = document.createElement('span');
                                span.textContent = word + ' ';
                                span.className = 'word';
                                span.style.animationDelay = `${delayCounter}s`;
                                el.appendChild(span);
                                delayCounter += 0.3; // Slower: 0.2s -> 0.4s
                            }
                        });
                    } else if (node.tagName === 'BR') {
                        el.appendChild(node.cloneNode());
                        delayCounter += 0.6; // Slower newline
                    }
                });
                return delayCounter;
            }

            const totalTime = splitText(msgElement);

            setTimeout(() => {
                btnElement.style.transition = 'opacity 1s ease-in';
                btnElement.style.opacity = '1';
                btnElement.style.pointerEvents = 'auto'; 
            }, totalTime * 1000);
        }

        // 3. Stars & Meteor Logic
        const starsContainer = document.getElementById('stars-container');
        const starCount = 200;

        for (let i = 0; i < starCount; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            const size = Math.random() * 2 + 1;
            star.style.width = `${size}px`;
            star.style.height = `${size}px`;
            star.style.left = `${Math.random() * 100}%`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.setProperty('--duration', `${Math.random() * 3 + 2}s`);
            starsContainer.appendChild(star);
        }

        function createMeteor() {
            const meteor = document.createElement('div');
            meteor.className = 'meteor';
            meteor.style.left = `${Math.random() * 100}vw`;
            meteor.style.top = `${Math.random() * 50}vh`; 
            meteor.style.animationDuration = `${Math.random() * 2 + 3}s`;
            starsContainer.appendChild(meteor);
            setTimeout(() => { meteor.remove(); }, 5000);
        }
        setInterval(createMeteor, 2000);

        // 4. Fireworks & Celebration
        const container = document.getElementById('fireworks-canvas');
        const fireworks = new Fireworks.default(container, {
            autoresize: true, opacity: 0.5, acceleration: 1.05, friction: 0.97, gravity: 1.5,
            particles: 50, traceLength: 3, traceSpeed: 10, explosion: 5, intensity: 30, flickering: 50,
            lineStyle: 'round', hue: { min: 0, max: 360 }, delay: { min: 30, max: 60 },
            rocketsPoint: { min: 50, max: 50 },
            lineWidth: { explosion: { min: 1, max: 3 }, trace: { min: 1, max: 2 } },
            brightness: { min: 50, max: 80 }, decay: { min: 0.015, max: 0.03 },
            mouse: { click: false, move: false, max: 1 }
        });

        let isCelebrating = false;

        function startCelebration() {
            if (!isCelebrating) {
                fireworks.start();
                const btn = document.querySelector('.btn');
                btn.textContent = "Jangan lupa make a wish nid âœ¨";
                btn.style.opacity = '0.7';
                btn.style.border = 'none';
                btn.style.cursor = 'default';
                isCelebrating = true;
            }
        }
    </script>
</body>
</html>
